<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <title></title>
    <style>
      #sudokuarea{
        border-spacing : 0px;
        border : 3px solid black;
      }
      td{
        border : 0.5px solid black;
        width : 50px;
        height : 50px;
        text-align: center;

      }

    </style>
    <script>

var SUDOKU = function(){
          httpRequest = new XMLHttpRequest();

          if(!httpRequest) {
            alert('map을 불러오지 못했습니다.');

          }
          httpRequest.onreadystatechange = reContents;
          httpRequest.open('GET', 'https://sugoku.herokuapp.com/board?difficulty=easy');
          httpRequest.send(null);


        function reContents() {

          if (httpRequest.readyState === XMLHttpRequest.DONE) {
            if (httpRequest.status === 200) {

        //      console.log(httpRequest.responseText);
              _SUDOKUEASY = httpRequest.responseText;
              SUDOKUEASY = JSON.parse(_SUDOKUEASY);
              for(var i = 0 ; i < 9 ; i++){
        //        console.log(SUDOKUEASY.board[i]);
              }

            } else {
              alert('스도쿠 맵을 불러오지 못했습니다.');
            }
              init();
          }
        }
      };

    </script>
  </head>
  <body>

    <table id = "sudokuarea">

    </table>
  </body>
  <script>
  var BLANK = [];
  var CHECK = [];
    SUDOKU();

    function createTR(id){
      var tr = document.createElement("tr")
      tr.id = id;
      return tr;
    }

    function createTD(id){
      var td = document.createElement("td")
      td.id = id;
      return td;
    }

    function getTRid(y){
      return 'tr_' + y;
    }

    function getTDid(y,x){
      return 'td_' + y + '-' + x;
    }
    function clickevent(){
      for(var i=0; i<BLANK.length; i++){
        var $BLANK = $("#td_"+ BLANK[i]);
          $BLANK.click(WriteAns);

          console.log("#td_"+ BLANK[i]);
      }


    }
    function WriteAns(){

      ANS = Number(prompt("정답을 입력해주세요."));
      if(0 < ANS && ANS < 9){
        $(this).html(ANS);
      }else if(ANS === 0){
        $(this).html(null);
      }else{
        alert("공백 : 지우개, 1~9값 입력해주세요.");
      }
    }
    function UPDATEarray(){
      CHECK = [];

      for(var y = 0;y<9;y++){
        for(var x = 0;x<9;x++){
          CHECK.push($("#"+getTDid(y,x)).text());
        }
      }


    }
    function validation(){
      for(var y=0 ; y<9 ; y++){
        for(var x=0 ; x<9 ; x++){

        }

      }

    }


    function init(){
      var sudokuarea = $("#sudokuarea");
      for(var y=0 ; y<9 ; y++){
        var tr = createTR(getTRid(y));
        sudokuarea.append(tr);

        for(var x=0; x<9;x++){
          var td = createTD(getTDid(y,x));
          tr.append(td);
          if(SUDOKUEASY.board[y][x]!== 0){
            document.getElementById(getTDid(y,x)).innerHTML= "<strong>"+SUDOKUEASY.board[y][x]+"</strong>";
            // td.innerHTML = y+","+x;
          }else{
            var target = document.getElementById(getTDid(y,x));
            BLANK.push([y+"-"+x]);
            console.log(getTDid(y,x));

          }

        }

      }
      clickevent();
    }
    $(document).ready(SUDOKU());

  </script>
</html>
